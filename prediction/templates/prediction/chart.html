{% extends 'display_part/index.html' %}
{% load static %}
{% block nav %}{% endblock nav %}

{% block content %}
<form class="chart_selector" action="{% url 'prediction:show_chart' store_str=store_str %}" method="GET" id="submit_form">
    <div class="date_selector">
    <input type="submit" name="move" value='before'>
    <select name="previous_date" id="submit_select">
        {% for date in previous_date_list %}
        <option value="{{date}}">{{date}}</option>
        {% endfor %}
    </select>
    <input type="submit" name="move" value='after'>
    </div>
    <div class="store_selector">
    <input type="submit" name="store"  value="FES">
    <input type="submit" name="store"  value="Garage">
    <input type="submit" name="store"  value="ÁÅØÁØ≠">
    <input type="submit" name="store"  value="ÁΩ†‰∏ÄÁõÆ">
    <input type="submit" name="store"  value="ÁΩ†‰∏≠ÁõÆÈªí">
    </div>
</form>
<div class="wrap_chart">
    <canvas class="chart_lunch" id='fesLunchChart' height="100"></canvas>
</div>

<div class="df_table_wrapper">
    <div class="df_table_container">
        <div class="df_table">
            <table border="3">
                <tr>
                    <th></th>
                    {% for day in dayList %}
                    <th>{{day}}</th>
                    {% endfor %}
                </tr>
                <tr>
                    <td>‰∫àÊ∏¨</td>
                    {% for p in pred_l %}
                        <td>
                            {{p}}Âêç
                        </td>
                    {% endfor %}
                </tr>
                <tr>
                    <td>Êó•„Åî„Å®Â£≤‰∏ä</td>
                    {% for s in pred_daily_sales_l %}
                        <td>
                            {{s}}‰∏á
                        </td>
                    {% endfor %}
                </tr>
                <tr>
                    <td>Á¥ØË®àÂ£≤‰∏ä</td>
                    {% for s in pred_amount_sales_forTable_l %}
                        <td>
                            {{s}}‰∏á
                        </td>
                    {% endfor %}
                </tr>
                <tr>
                    <td></td>
                    {% comment %} Á©∫ÁôΩ {% endcomment %}
                    {% for p in required_people_l %}
                    <td></td>
                    {% endfor %}
                </tr>
                <tr>
                    <td>ÂÆüÈöõ</td>
                    {% for a in actually_l %}
                        <td>
                            {{a}}Âêç
                        </td>
                    {% endfor %}
                </tr>
                <tr>
                    <td>Êó•„Åî„Å®Â£≤‰∏ä</td>
                    {% for s in actually_daily_sales_l %}
                        <td>
                            {{s}}‰∏á
                        </td>
                    {% endfor %}
                </tr>
                <tr>
                    <td>Á¥ØË®àÂ£≤‰∏ä</td>
                    {% for s in actually_amount_sales_l_forTable %}
                        <td>
                            {{s}}‰∏á
                        </td>
                    {% endfor %}
                </tr>

            </table>
            <span>(ÈÅéÂéª2„É∂ÊúàÂèÇÁÖß)‚òÄÂçò‰æ°{{unit_price_l}}ÂÜÜ</span>
            <span>Ê≠£Á¢∫Áéá ‚òÄ{{accuracy_l}}</span>
        </div>
    </div>
</div>

<div class="wrap_chart">
    <canvas id='fesDinnerChart' height="100"></canvas>
</div>

<div class="df_table_wrapper">
    <div class="df_table_container">
        <div class="df_table">
            <table border="3">
                <tr>
                    <th></th>
                    {% for day in dayList %}
                    <th>{{day}}</th>
                    {% endfor %}
                </tr>
                <tr>
                    <td>‰∫àÊ∏¨</td>
                    {% for p in pred_d %}
                        <td>
                            {{p}}Âêç
                        </td>
                    {% endfor %}
                </tr>
                <tr>
                    <td>Êó•„Åî„Å®Â£≤‰∏ä</td>
                    {% for s in pred_daily_sales_d %}
                        <td>
                            {{s}}‰∏á
                        </td>
                    {% endfor %}
                </tr>
                <tr>
                    <td>Á¥ØË®àÂ£≤‰∏ä</td>
                    {% for s in pred_amount_sales_forTable_d %}
                        <td>
                            {{s}}‰∏á
                        </td>
                    {% endfor %}
                </tr>
                <tr>
                    <td></td>
                    {% comment %} Á©∫ÁôΩ {% endcomment %}
                    {% for p in required_people_d %}
                    <td></td>
                    {% endfor %}
                </tr>
                <tr>
                    <td>ÂÆüÈöõ</td>
                    {% for a in actually_d %}
                        <td>
                            {{a}}Âêç
                        </td>
                    {% endfor %}
                </tr>
                <tr>
                    <td>Êó•„Åî„Å®Â£≤‰∏ä</td>
                    {% for s in actually_daily_sales_d %}
                        <td>
                            {{s}}‰∏á
                        </td>
                    {% endfor %}
                </tr>
                <tr>
                    <td>Á¥ØË®àÂ£≤‰∏ä</td>
                    {% for s in actually_amount_sales_d_forTable %}
                        <td>
                            {{s}}‰∏á
                        </td>
                    {% endfor %}
                </tr>


            </table>
            <span>(ÈÅéÂéª2„É∂ÊúàÂèÇÁÖß)üåôÂçò‰æ°{{unit_price_d}}ÂÜÜ</span>
            <span>Ê≠£Á¢∫Áéá üåô{{accuracy_d}}</span>
        </div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.min.js"></script>
<script>

var select = document.getElementById('submit_select');
select.value = '{{ previous_date }}'
console.log(select);

    // „Éº„Éº„Éº„ÉºÊòº„Éº„Éº„Éº„Éº„Éº
    const list = [];
    {% for i in xticks %}
    list.push("{{i}}")
    {% endfor %}

    new Chart(document.getElementById("fesLunchChart"), {
        type: "line",
        data: {
            labels: list,
            datasets: [{
                label: "‰∫àÊ∏¨ {{pred_total_l}}Âêç",
                data: {{ pred_l }},
                borderColor: ["rgb(255, 99, 132)"],
                lineTension: 0,
                fill: false,
                // borderWidth:
            }, {
                label: "ÂÆüÈöõÂÆ¢Êï∞ {{actu_total_l}}Âêç",
                data: {{ actually_l }},
                borderColor: ["rgb(25, 99, 132)"],
                lineTension: 0,
                fill: false,
                // borderWidth:
            },],
        },
        options: {
        title: {
            display: true,
            text: '{{store_str}}:„É©„É≥„ÉÅ'
        },
        scales: {
            yAxes: [{
                ticks: {
                    min: 0,
                    max: 100,
                    // stepSize: 10,
                },
            }],

            xAxes: [{
                ticks: {
                    autoSkip: false,
                    maxRotation: 70,
                    minRotation: 70,
                }
            }]
        },
        maintainAspectRatio: false,
    }
    });


    // „Éº„Éº„Éº„Éº„Éº„Éº„Çà„Çã„Éº„Éº„Éº„Éº„Éº„Éº
    const list_d = [];
    {% for i in xticks %}
    list_d.push("{{i}}")
    {% endfor %}

    new Chart(document.getElementById("fesDinnerChart"), {
        type: "line",
        data: {
            labels: list_d,
            datasets: [{
                label: "‰∫àÊ∏¨ {{pred_total_d}}Âêç",
                data: {{ pred_d }},
                borderColor: ["rgb(255, 99, 132)"],
                lineTension: 0,
                fill: false,
                        // borderWidth:
            }, {
                label: "ÂÆüÈöõÂÆ¢Êï∞ {{actu_total_d}}Âêç",
                data: {{ actually_d }},
                borderColor: ["rgb(25, 99, 132)"],
                lineTension: 0,
                fill: false,
                // borderWidth:
            },],
        },
        options: {
            title: {
                display: true,
                text: '{{store_str}}„Éá„Ç£„Éä„Éº'
            },
            scales: {
                yAxes: [{
                    ticks: {
                        min: 0,
                        max: 100,
                        // stepSize: 10,
                    },

                }],

                xAxes: [{
                    ticks: {
                        autoSkip: false,
                        maxRotation: 70,
                        minRotation: 70,
                    }
                }]
            },
            maintainAspectRatio: false,

        }
    });
</script>
{% endblock content %}